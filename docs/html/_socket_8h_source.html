<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Space invader: /home/sautax/git/Battlegroud-BR-master/node_modules/uws/src/Socket.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Space invader
   </div>
   <div id="projectbrief">a Space invader created in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_socket_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Socket.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_socket_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef SOCKET_UWS_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define SOCKET_UWS_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_networking_8h.html">Networking.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceu_s.html">uS</a> {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html">    8</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structu_s_1_1_transfer_data.html">TransferData</a> {</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="comment">// Connection state</span></div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#a44abbb390c330c28d9d9978c4a1d3738">   10</a></span>&#160;    <a class="code" href="_asio_8h.html#a083ed755f6023cb932aac26720c654d0">uv_os_sock_t</a> <a class="code" href="structu_s_1_1_transfer_data.html#a44abbb390c330c28d9d9978c4a1d3738">fd</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#ab5f00a4ff96f2449fdb95cd2119d12e1">   11</a></span>&#160;    SSL *<a class="code" href="structu_s_1_1_transfer_data.html#ab5f00a4ff96f2449fdb95cd2119d12e1">ssl</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="comment">// Poll state</span></div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#afb2a25a016e2d6f726fc9e97f87d4af4">   14</a></span>&#160;    void (*<a class="code" href="structu_s_1_1_transfer_data.html#afb2a25a016e2d6f726fc9e97f87d4af4">pollCb</a>)(<a class="code" href="structu_s_1_1_poll.html">Poll</a> *, <a class="code" href="build__log_8txt.html#a1f7865b67397a7a67a9a651ef20a290b">int</a>, <a class="code" href="build__log_8txt.html#a1f7865b67397a7a67a9a651ef20a290b">int</a>);</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#a267e4730c68d4f74ce21d31918e610d9">   15</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_transfer_data.html#a267e4730c68d4f74ce21d31918e610d9">pollEvents</a>;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="comment">// User state</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#af3ac1b3143ed2f76b76e4bc4c923817f">   18</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structu_s_1_1_transfer_data.html#af3ac1b3143ed2f76b76e4bc4c923817f">userData</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="comment">// Destination</span></div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#a6dacc0980483bb29a9c1f99380222978">   21</a></span>&#160;    <a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *<a class="code" href="structu_s_1_1_transfer_data.html#a6dacc0980483bb29a9c1f99380222978">destination</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="structu_s_1_1_transfer_data.html#a5c5d304c57a4e76bd905b5c784472ec6">   22</a></span>&#160;    void (*<a class="code" href="structu_s_1_1_transfer_data.html#a5c5d304c57a4e76bd905b5c784472ec6">transferCb</a>)(<a class="code" href="structu_s_1_1_poll.html">Poll</a> *);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;};</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// perfectly 64 bytes (4 + 60)</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html">   26</a></span>&#160;<span class="keyword">struct </span><a class="code" href="_networking_8h.html#aa9d94c071c7778c2f0cc1fd1a78baca6">WIN32_EXPORT</a> <a class="code" href="structu_s_1_1_socket.html">Socket</a> : <a class="code" href="structu_s_1_1_poll.html">Poll</a> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a4906052563459d6978e12b796574e25c">   29</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_socket.html#a4906052563459d6978e12b796574e25c">poll</a> : 4;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a2f943ac89c8d7578845de330781b72b4">   30</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_socket.html#a2f943ac89c8d7578845de330781b72b4">shuttingDown</a> : 4;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    } <a class="code" href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">state</a> = {0, <span class="keyword">false</span>};</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">   33</a></span>&#160;    SSL *<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a3d59d676b6334ab2a1e0e35a1221db5f">   34</a></span>&#160;    <span class="keywordtype">void</span> *user = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">   35</a></span>&#160;    <a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// this is not needed by HttpSocket!</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html">   38</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structu_s_1_1_socket_1_1_queue.html">Queue</a> {</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">   39</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> {</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">   40</a></span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">   41</a></span>&#160;            <span class="keywordtype">size_t</span> <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">   42</a></span>&#160;            <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> *nextMessage = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">   43</a></span>&#160;            void (*callback)(<span class="keywordtype">void</span> *socket, <span class="keywordtype">void</span> *data, <span class="keywordtype">bool</span> cancelled, <span class="keywordtype">void</span> *reserved) = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a0588478aa3eb1f5f507df549baf9424d">   44</a></span>&#160;            <span class="keywordtype">void</span> *callbackData = <span class="keyword">nullptr</span>, *reserved = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        };</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html#a6b4a95a1ffc433f72e10f4069b225d46">   47</a></span>&#160;        <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> *head = <span class="keyword">nullptr</span>, *tail = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html#a09eda935ea88dcacd615dce16e686c71">   48</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket_1_1_queue.html#a09eda935ea88dcacd615dce16e686c71">pop</a>()</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> *nextMessage;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <span class="keywordflow">if</span> ((nextMessage = head-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">nextMessage</a>)) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                <span class="keyword">delete</span> [] (<span class="keywordtype">char</span> *) head;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                head = nextMessage;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="keyword">delete</span> [] (<span class="keywordtype">char</span> *) head;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                head = tail = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">   60</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">empty</a>() {<span class="keywordflow">return</span> head == <span class="keyword">nullptr</span>;}</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html#ad770e4a9f5e9d7827bd8beff325fe598">   61</a></span>&#160;        <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> *<a class="code" href="structu_s_1_1_socket_1_1_queue.html#ad770e4a9f5e9d7827bd8beff325fe598">front</a>() {<span class="keywordflow">return</span> head;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_queue.html#aa0930c1a958c4b2e1d2aeb6b43b60021">   63</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket_1_1_queue.html#aa0930c1a958c4b2e1d2aeb6b43b60021">push</a>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Message</a> *message)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">nextMessage</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">if</span> (tail) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                tail-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">nextMessage</a> = message;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                tail = message;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                head = message;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                tail = message;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    } messageQueue;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">   76</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>() {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">state</a>.poll;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">   80</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">setPoll</a>(<span class="keywordtype">int</span> poll) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">state</a>.poll = poll;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> poll;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#acd05df2e4a97e47934a356213aefb792">   85</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#acd05df2e4a97e47934a356213aefb792">setShuttingDown</a>(<span class="keywordtype">bool</span> shuttingDown) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">state</a>.shuttingDown = shuttingDown;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a7c87c8a0af2f52e3efd6b4cbca88bf61">   89</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a7c87c8a0af2f52e3efd6b4cbca88bf61">transfer</a>(<a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *nodeData, <span class="keywordtype">void</span> (*<a class="code" href="build__log_8txt.html#a644a8e656cf4d496cc7d47a0154d6f4b">cb</a>)(<a class="code" href="structu_s_1_1_poll.html">Poll</a> *)) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">// userData is invalid from now on till onTransfer</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="addon_8h.html#a2340275cf8382df4b7c494c1a78f5ccb">setUserData</a>(<span class="keyword">new</span> <a class="code" href="structu_s_1_1_transfer_data.html">TransferData</a>({getFd(), ssl, getCb(), getPoll(), <a class="code" href="addon_8h.html#a2cf633790443e79db7bd9714b955c0e0">getUserData</a>(), nodeData, <a class="code" href="build__log_8txt.html#a644a8e656cf4d496cc7d47a0154d6f4b">cb</a>}));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        stop(this-&gt;nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        close(this-&gt;nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, [](<a class="code" href="structu_s_1_1_poll.html">Poll</a> *p) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            Socket *s = (Socket *) p;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            TransferData *transferData = (TransferData *) s-&gt;getUserData();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            transferData-&gt;destination-&gt;asyncMutex-&gt;lock();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            bool wasEmpty = transferData-&gt;destination-&gt;transferQueue.empty();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            transferData-&gt;destination-&gt;transferQueue.push_back(s);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            transferData-&gt;destination-&gt;asyncMutex-&gt;unlock();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            if (wasEmpty) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                transferData-&gt;destination-&gt;async-&gt;send();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        });</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a0a6a0e4adbbd115c8e88a1a00be198e3">  108</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a0a6a0e4adbbd115c8e88a1a00be198e3">changePoll</a>(<a class="code" href="structu_s_1_1_socket.html">Socket</a> *socket) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (!threadSafeChange(nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, <span class="keyword">this</span>, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>())) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">if</span> (socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a6a2a06208b4d64a5a8ef75a4bd3e34bd">tid</a> != pthread_self()) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a6e9f900bf9309cf3e77d12bbdf6ad09c">asyncMutex</a>-&gt;lock();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#ad727b0db74cd9a912f3931d147837801">changePollQueue</a>.push_back(socket);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a6e9f900bf9309cf3e77d12bbdf6ad09c">asyncMutex</a>-&gt;unlock();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a85e8e0e12215ee250a8f230c2ee383e8">async</a>-&gt;<a class="code" href="structu_s_1_1_async.html#a8b221115835940dc62d0df8f6c54b86d">send</a>();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                change(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, socket, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>());</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// clears user data!</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">template</span> &lt;<span class="keywordtype">void</span> onTimeout(Socket *)&gt;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a97f8c1006871b3b39d66d85c7effa4d5">  123</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a97f8c1006871b3b39d66d85c7effa4d5">startTimeout</a>(<span class="keywordtype">int</span> timeoutMs = 15000) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="structu_s_1_1_timer.html">Timer</a> *timer = <span class="keyword">new</span> <a class="code" href="structu_s_1_1_timer.html">Timer</a>(nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        timer-&gt;<a class="code" href="structu_s_1_1_timer.html#a350d0ced8990746bcf176dbb92b59bbe">setData</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        timer-&gt;<a class="code" href="structu_s_1_1_timer.html#af90fc27ca995cacbfe4343dce88929aa">start</a>([](<a class="code" href="structu_s_1_1_timer.html">Timer</a> *timer) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="structu_s_1_1_socket.html">Socket</a> *s = (<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) timer-&gt;<a class="code" href="structu_s_1_1_timer.html#acebdbb39da268b16462017e4f323ec53">getData</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            s-&gt;<a class="code" href="structu_s_1_1_socket.html#a4ce1bf5d0098ad1346a99bd71530b7de">cancelTimeout</a>();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            onTimeout(s);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }, timeoutMs, 0);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        user = timer;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a4ce1bf5d0098ad1346a99bd71530b7de">  135</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a4ce1bf5d0098ad1346a99bd71530b7de">cancelTimeout</a>() {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="structu_s_1_1_timer.html">Timer</a> *timer = (<a class="code" href="structu_s_1_1_timer.html">Timer</a> *) <a class="code" href="addon_8h.html#a2cf633790443e79db7bd9714b955c0e0">getUserData</a>();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (timer) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            timer-&gt;<a class="code" href="structu_s_1_1_timer.html#afd1860bec06e19ed4d51c7768c3696ae">stop</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            timer-&gt;<a class="code" href="structu_s_1_1_timer.html#acd53235761732656abe2f49495b27315">close</a>();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            user = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> STATE&gt;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#aef1048dff6be13161695c1752e7a04b6">  145</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#aef1048dff6be13161695c1752e7a04b6">sslIoHandler</a>(<a class="code" href="structu_s_1_1_poll.html">Poll</a> *p, <span class="keywordtype">int</span> status, <span class="keywordtype">int</span> events) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="structu_s_1_1_socket.html">Socket</a> *socket = (<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (status &lt; 0) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (!socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">empty</a>() &amp;&amp; ((events &amp; UV_WRITABLE) || SSL_want(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>) == SSL_READING)) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">cork</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#ad770e4a9f5e9d7827bd8beff325fe598">front</a>();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordtype">int</span> sent = SSL_write(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="keywordflow">if</span> (sent == (ssize_t) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    <span class="keywordflow">if</span> (messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a>) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a>(p, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">callbackData</a>, <span class="keyword">false</span>, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a0588478aa3eb1f5f507df549baf9424d">reserved</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a09eda935ea88dcacd615dce16e686c71">pop</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    <span class="keywordflow">if</span> (socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">empty</a>()) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        <span class="keywordflow">if</span> ((socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a6864c35ea98b57a30ab3918c532e2c79">state</a>.<a class="code" href="structu_s_1_1_socket.html#a4906052563459d6978e12b796574e25c">poll</a> &amp; UV_WRITABLE) &amp;&amp; SSL_want(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>) != SSL_WRITING) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                            socket-&gt;<a class="code" href="structu_s_1_1_poll.html#abe257e4e4a428a8a1ef1b4d3ed564a0d">change</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, socket, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">setPoll</a>(UV_READABLE));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sent &lt;= 0) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    <span class="keywordflow">switch</span> (SSL_get_error(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>, sent)) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_READ:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_WRITE:</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                        <span class="keywordflow">if</span> ((socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>() &amp; UV_WRITABLE) == 0) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                            socket-&gt;<a class="code" href="structu_s_1_1_poll.html#abe257e4e4a428a8a1ef1b4d3ed564a0d">change</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, socket, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">setPoll</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>() | UV_WRITABLE));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                        STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">cork</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">if</span> (events &amp; UV_READABLE) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordtype">int</span> length = SSL_read(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a8c5219c155234ca3ec7635a5d34bb10d">recvBuffer</a>, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#af1a37184845a5848af5a1281b93f02ad">recvLength</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">if</span> (length &lt;= 0) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordflow">switch</span> (SSL_get_error(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>, length)) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_READ:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_WRITE:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <span class="keywordflow">if</span> ((socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>() &amp; UV_WRITABLE) == 0) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                            socket-&gt;<a class="code" href="structu_s_1_1_poll.html#abe257e4e4a428a8a1ef1b4d3ed564a0d">change</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, socket, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">setPoll</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">getPoll</a>() | UV_WRITABLE));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="comment">// Warning: onData can delete the socket! Happens when HttpSocket upgrades</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    socket = STATE::onData((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a8c5219c155234ca3ec7635a5d34bb10d">recvBuffer</a>, length);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="keywordflow">if</span> (socket-&gt;<a class="code" href="structu_s_1_1_poll.html#af8085e20853c641510aeb5040c0d186f">isClosed</a>() || socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a9cbd30c06deb03c91fdbbe434d761875">isShuttingDown</a>()) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            } <span class="keywordflow">while</span> (SSL_pending(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">ssl</a>));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> STATE&gt;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a72efcc8bb407e6f313b6a14e7beaee62">  217</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a72efcc8bb407e6f313b6a14e7beaee62">ioHandler</a>(<a class="code" href="structu_s_1_1_poll.html">Poll</a> *p, <span class="keywordtype">int</span> status, <span class="keywordtype">int</span> events) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="structu_s_1_1_socket.html">Socket</a> *socket = (<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *nodeData = socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="structu_s_1_1_context.html">Context</a> *netContext = nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#aa817a2ac768f5dacc48d013e77eb3b65">netContext</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (status &lt; 0) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (events &amp; UV_WRITABLE) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">if</span> (!socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">empty</a>() &amp;&amp; (events &amp; UV_WRITABLE)) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">cork</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#ad770e4a9f5e9d7827bd8beff325fe598">front</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    ssize_t sent = <a class="code" href="addon_8h.html#ad4f09777cea808648dcd309b06af2911">::send</a>(socket-&gt;<a class="code" href="structu_s_1_1_poll.html#ab2dcc90867bd8d857be1865dda0e9e10">getFd</a>(), messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>, <a class="code" href="_networking_8h.html#a9f55d0e90dc8cc6b2287312435cdde48">MSG_NOSIGNAL</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <span class="keywordflow">if</span> (sent == (ssize_t) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                        <span class="keywordflow">if</span> (messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                            messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a>(p, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">callbackData</a>, <span class="keyword">false</span>, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a0588478aa3eb1f5f507df549baf9424d">reserved</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                        }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a09eda935ea88dcacd615dce16e686c71">pop</a>();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                        <span class="keywordflow">if</span> (socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">messageQueue</a>.<a class="code" href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">empty</a>()) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                            <span class="comment">// todo, remove bit, don&#39;t set directly</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            socket-&gt;<a class="code" href="structu_s_1_1_poll.html#abe257e4e4a428a8a1ef1b4d3ed564a0d">change</a>(socket-&gt;<a class="code" href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">nodeData</a>-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, socket, socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">setPoll</a>(UV_READABLE));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sent == <a class="code" href="_networking_8h.html#a633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        <span class="keywordflow">if</span> (!netContext-&gt;<a class="code" href="structu_s_1_1_context.html#ac52be5687ad9dcd4388d7225003dabf6">wouldBlock</a>()) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                            STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> -= sent;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a> += sent;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                socket-&gt;<a class="code" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">cork</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">if</span> (events &amp; UV_READABLE) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordtype">int</span> length = recv(socket-&gt;<a class="code" href="structu_s_1_1_poll.html#ab2dcc90867bd8d857be1865dda0e9e10">getFd</a>(), nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a8c5219c155234ca3ec7635a5d34bb10d">recvBuffer</a>, nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#af1a37184845a5848af5a1281b93f02ad">recvLength</a>, 0);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">if</span> (length &gt; 0) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                STATE::onData((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p, nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a8c5219c155234ca3ec7635a5d34bb10d">recvBuffer</a>, length);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length &lt;= 0 || (length == <a class="code" href="_networking_8h.html#a633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a> &amp;&amp; !netContext-&gt;<a class="code" href="structu_s_1_1_context.html#ac52be5687ad9dcd4388d7225003dabf6">wouldBlock</a>())) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                STATE::onEnd((<a class="code" href="structu_s_1_1_socket.html">Socket</a> *) p);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">class</span> STATE&gt;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a8a172747528e58a85c682abf483ed59a">  271</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a8a172747528e58a85c682abf483ed59a">setState</a>() {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (ssl) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            setCb(sslIoHandler&lt;STATE&gt;);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            setCb(ioHandler&lt;STATE&gt;);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a4a6647b9d962984c23ecf89a3d5b6efd">  279</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structu_s_1_1_socket.html#a4a6647b9d962984c23ecf89a3d5b6efd">hasEmptyQueue</a>() {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> messageQueue.empty();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a4d1bf51315b6dd297047b29a5a8db8fe">  283</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a4d1bf51315b6dd297047b29a5a8db8fe">enqueue</a>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *message) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        messageQueue.push(message);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#af3cccd4b155509ecbfdb6ebd5ad67f55">  287</a></span>&#160;    <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *<a class="code" href="structu_s_1_1_socket.html#af3cccd4b155509ecbfdb6ebd5ad67f55">allocMessage</a>(<span class="keywordtype">size_t</span> length, <span class="keyword">const</span> <span class="keywordtype">char</span> *data = 0) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = (<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *) <span class="keyword">new</span> <span class="keywordtype">char</span>[<span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>) + length];</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> = length;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a> = ((<span class="keywordtype">char</span> *) messagePtr) + <span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">nextMessage</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (data) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            memcpy((<span class="keywordtype">char</span> *) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, data, messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> messagePtr;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a5e3d88792f59e861f61081eced2a77d3">  300</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a5e3d88792f59e861f61081eced2a77d3">freeMessage</a>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *message) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keyword">delete</span> [] (<span class="keywordtype">char</span> *) message;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ad5ef4e37198b1356fe1ad5deb5d66f1f">  304</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structu_s_1_1_socket.html#ad5ef4e37198b1356fe1ad5deb5d66f1f">write</a>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *message, <span class="keywordtype">bool</span> &amp;wasTransferred) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        ssize_t sent = 0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (messageQueue.empty()) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (ssl) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                sent = SSL_write(ssl, message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">if</span> (sent == (ssize_t) message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    wasTransferred = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sent &lt; 0) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="keywordflow">switch</span> (SSL_get_error(ssl, sent)) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_READ:</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="keywordflow">case</span> SSL_ERROR_WANT_WRITE:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        <span class="keywordflow">if</span> ((getPoll() &amp; UV_WRITABLE) == 0) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                            setPoll(getPoll() | UV_WRITABLE);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                            changePoll(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                sent = <a class="code" href="addon_8h.html#ad4f09777cea808648dcd309b06af2911">::send</a>(getFd(), message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>, <a class="code" href="_networking_8h.html#a9f55d0e90dc8cc6b2287312435cdde48">MSG_NOSIGNAL</a>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordflow">if</span> (sent == (ssize_t) message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a>) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    wasTransferred = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sent == <a class="code" href="_networking_8h.html#a633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <span class="keywordflow">if</span> (!nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#aa817a2ac768f5dacc48d013e77eb3b65">netContext</a>-&gt;<a class="code" href="structu_s_1_1_context.html#ac52be5687ad9dcd4388d7225003dabf6">wouldBlock</a>()) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> -= sent;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    message-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a> += sent;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> ((getPoll() &amp; UV_WRITABLE) == 0) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    setPoll(getPoll() | UV_WRITABLE);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    changePoll(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        messageQueue.push(message);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        wasTransferred = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> D&gt;</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ab000a9d579baac719182074100133c21">  353</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#ab000a9d579baac719182074100133c21">sendTransformed</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *message, <span class="keywordtype">size_t</span> length, <span class="keywordtype">void</span>(*callback)(<span class="keywordtype">void</span> *socket, <span class="keywordtype">void</span> *data, <span class="keywordtype">bool</span> cancelled, <span class="keywordtype">void</span> *reserved), <span class="keywordtype">void</span> *callbackData, D transformData) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordtype">size_t</span> estimatedLength = T::estimate(message, length) + <span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (hasEmptyQueue()) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">if</span> (estimatedLength &lt;= <a class="code" href="structu_s_1_1_node_data.html#a535bc12e015b9d46c5da7a8bc57b2b5c">uS::NodeData::preAllocMaxSize</a>) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordtype">int</span> memoryLength = estimatedLength;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="keywordtype">int</span> memoryIndex = nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a445a0a4183a8a06dd302bc9d8c5582f4">getMemoryBlockIndex</a>(memoryLength);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = (<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *) nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a4392ca8c27b8f58e86721377da1dec49">getSmallMemoryBlock</a>(memoryIndex);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a> = ((<span class="keywordtype">char</span> *) messagePtr) + <span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> = T::transform(message, (<span class="keywordtype">char</span> *) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, length, transformData);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keywordtype">bool</span> wasTransferred;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <span class="keywordflow">if</span> (write(messagePtr, wasTransferred)) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    <span class="keywordflow">if</span> (!wasTransferred) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a7314b340328f78687bb3c5d86c500d95">freeSmallMemoryBlock</a>((<span class="keywordtype">char</span> *) messagePtr, memoryIndex);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        <span class="keywordflow">if</span> (callback) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                            callback(<span class="keyword">this</span>, callbackData, <span class="keyword">false</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a> = callback;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">callbackData</a> = callbackData;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a7314b340328f78687bb3c5d86c500d95">freeSmallMemoryBlock</a>((<span class="keywordtype">char</span> *) messagePtr, memoryIndex);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="keywordflow">if</span> (callback) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                        callback(<span class="keyword">this</span>, callbackData, <span class="keyword">true</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = allocMessage(estimatedLength - <span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>));</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> = T::transform(message, (<span class="keywordtype">char</span> *) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, length, transformData);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordtype">bool</span> wasTransferred;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="keywordflow">if</span> (write(messagePtr, wasTransferred)) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    <span class="keywordflow">if</span> (!wasTransferred) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        freeMessage(messagePtr);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        <span class="keywordflow">if</span> (callback) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                            callback(<span class="keyword">this</span>, callbackData, <span class="keyword">false</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a> = callback;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">callbackData</a> = callbackData;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    freeMessage(messagePtr);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    <span class="keywordflow">if</span> (callback) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        callback(<span class="keyword">this</span>, callbackData, <span class="keyword">true</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a> *messagePtr = allocMessage(estimatedLength - <span class="keyword">sizeof</span>(<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html">Queue::Message</a>));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">length</a> = T::transform(message, (<span class="keywordtype">char</span> *) messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">data</a>, length, transformData);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">callback</a> = callback;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            messagePtr-&gt;<a class="code" href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">callbackData</a> = callbackData;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            enqueue(messagePtr);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#af0382e650ead4694c8114c4b0b56743b">  414</a></span>&#160;    <a class="code" href="structu_s_1_1_socket.html#af0382e650ead4694c8114c4b0b56743b">Socket</a>(<a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *nodeData, <a class="code" href="structu_s_1_1_loop.html">Loop</a> *loop, <a class="code" href="_asio_8h.html#a083ed755f6023cb932aac26720c654d0">uv_os_sock_t</a> fd, SSL *ssl) : <a class="code" href="structu_s_1_1_poll.html">Poll</a>(loop, fd), ssl(ssl), nodeData(nodeData) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (ssl) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="comment">// OpenSSL treats SOCKETs as int</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            SSL_set_fd(ssl, (<span class="keywordtype">int</span>) fd);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            SSL_set_mode(ssl, SSL_MODE_RELEASE_BUFFERS);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ae41d00dd8888a37bf235d6e4c4dd3bef">  422</a></span>&#160;    <a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *<a class="code" href="structu_s_1_1_socket.html#ae41d00dd8888a37bf235d6e4c4dd3bef">getNodeData</a>() {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">return</span> nodeData;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a954aacb6f92fd2d0eb7ad78c3e0dc913">  426</a></span>&#160;    <a class="code" href="structu_s_1_1_poll.html">Poll</a> *next = <span class="keyword">nullptr</span>, *prev = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ab86ba43740c50f1a969917ee1105e55f">  428</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structu_s_1_1_socket.html#ab86ba43740c50f1a969917ee1105e55f">getUserData</a>() {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> user;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a81edd7ed05f455899a09711e37fb2f42">  432</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a81edd7ed05f455899a09711e37fb2f42">setUserData</a>(<span class="keywordtype">void</span> *user) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        this-&gt;user = user;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_address.html">  436</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structu_s_1_1_socket_1_1_address.html">Address</a> {</div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_address.html#af67cd32ef387050c9efb9bbc52874fd2">  437</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structu_s_1_1_socket_1_1_address.html#af67cd32ef387050c9efb9bbc52874fd2">port</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_address.html#a949c31d62265b47d35f3f3351fee9f27">  438</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structu_s_1_1_socket_1_1_address.html#a949c31d62265b47d35f3f3351fee9f27">address</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket_1_1_address.html#a9f8156ea3d8703c87f19881db575fd14">  439</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structu_s_1_1_socket_1_1_address.html#a9f8156ea3d8703c87f19881db575fd14">family</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    };</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="structu_s_1_1_socket_1_1_address.html">Address</a> <a class="code" href="addon_8h.html#a062f2d1c51ffd0684aa332705d928c40">getAddress</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a0d1b35a546a5afe214adf71a74b6abbf">  444</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a0d1b35a546a5afe214adf71a74b6abbf">setNoDelay</a>(<span class="keywordtype">int</span> enable) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        setsockopt(getFd(), IPPROTO_TCP, TCP_NODELAY, &amp;enable, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">  448</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">cork</a>(<span class="keywordtype">int</span> enable) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#if defined(TCP_CORK)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">// Linux &amp; SmartOS have proper TCP_CORK</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        setsockopt(getFd(), IPPROTO_TCP, TCP_CORK, &amp;enable, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">#elif defined(TCP_NOPUSH)</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">// Mac OS X &amp; FreeBSD have TCP_NOPUSH</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        setsockopt(getFd(), IPPROTO_TCP, TCP_NOPUSH, &amp;enable, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> (!enable) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="comment">// Tested on OS X, FreeBSD situation is unclear</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <a class="code" href="addon_8h.html#ad4f09777cea808648dcd309b06af2911">::send</a>(getFd(), <span class="stringliteral">&quot;&quot;</span>, 0, <a class="code" href="_networking_8h.html#a9f55d0e90dc8cc6b2287312435cdde48">MSG_NOSIGNAL</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#aa377349b17a65d9968f20b076db65858">  462</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#aa377349b17a65d9968f20b076db65858">shutdown</a>() {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span> (ssl) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="comment">//todo: poll in/out - have the io_cb recall shutdown if failed</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            SSL_shutdown(ssl);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            ::shutdown(getFd(), SHUT_WR);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a241d2ac2268d3a9fa3084cca32d218de">  472</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structu_s_1_1_socket.html#a241d2ac2268d3a9fa3084cca32d218de">closeSocket</a>() {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="_asio_8h.html#a083ed755f6023cb932aac26720c654d0">uv_os_sock_t</a> fd = getFd();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="structu_s_1_1_context.html">Context</a> *netContext = nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#aa817a2ac768f5dacc48d013e77eb3b65">netContext</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        stop(nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        netContext-&gt;<a class="code" href="structu_s_1_1_context.html#acba8f4f3c02db7a42864b9084c7186fa">closeSocket</a>(fd);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (ssl) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            SSL_free(ssl);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="structu_s_1_1_poll.html#a40ff55c845855ab9a387c5d2e7c09a45">Poll::close</a>(nodeData-&gt;<a class="code" href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">loop</a>, [](<a class="code" href="structu_s_1_1_poll.html">Poll</a> *p) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            delete (T *) p;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        });</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a9cbd30c06deb03c91fdbbe434d761875">  487</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structu_s_1_1_socket.html#a9cbd30c06deb03c91fdbbe434d761875">isShuttingDown</a>() {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">state</a>.shuttingDown;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#a6db9d28bd448a131448276ee03de1e6d">  491</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classu_s_1_1_node.html">Node</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="structu_s_1_1_socket.html#ae39d0b60fda531523b009a9c5e234400">  492</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structu_s_1_1_node_data.html">NodeData</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;};</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="structu_s_1_1_listen_socket.html">  495</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structu_s_1_1_listen_socket.html">ListenSocket</a> : <a class="code" href="structu_s_1_1_socket.html">Socket</a> {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="structu_s_1_1_listen_socket.html#afd8674fc7736330b555c67084bd0f6c5">  497</a></span>&#160;    <a class="code" href="structu_s_1_1_listen_socket.html#afd8674fc7736330b555c67084bd0f6c5">ListenSocket</a>(<a class="code" href="structu_s_1_1_node_data.html">NodeData</a> *nodeData, <a class="code" href="structu_s_1_1_loop.html">Loop</a> *loop, <a class="code" href="_asio_8h.html#a083ed755f6023cb932aac26720c654d0">uv_os_sock_t</a> fd, SSL *ssl) : <a class="code" href="structu_s_1_1_socket.html">Socket</a>(nodeData, loop, fd, ssl) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="structu_s_1_1_listen_socket.html#ad27258cd4d8fdd6140899739b7bafe8f">  501</a></span>&#160;    <a class="code" href="structu_s_1_1_timer.html">Timer</a> *timer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="structu_s_1_1_listen_socket.html#a32a3130d9f30f4071eb7d61a6bfa6708">  502</a></span>&#160;    <a class="code" href="classu_s_1_1_t_l_s_1_1_context.html">uS::TLS::Context</a> <a class="code" href="structu_s_1_1_listen_socket.html#a32a3130d9f30f4071eb7d61a6bfa6708">sslContext</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;};</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#endif // SOCKET_UWS_H</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructu_s_1_1_node_data_html_a535bc12e015b9d46c5da7a8bc57b2b5c"><div class="ttname"><a href="structu_s_1_1_node_data.html#a535bc12e015b9d46c5da7a8bc57b2b5c">uS::NodeData::preAllocMaxSize</a></div><div class="ttdeci">static const int preAllocMaxSize</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00206">Networking.h:206</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a08a28a30f98242ff37fa1918e158218e"><div class="ttname"><a href="structu_s_1_1_socket.html#a08a28a30f98242ff37fa1918e158218e">uS::Socket::ssl</a></div><div class="ttdeci">SSL * ssl</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00033">Socket.h:33</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_address_html"><div class="ttname"><a href="structu_s_1_1_socket_1_1_address.html">uS::Socket::Address</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00436">Socket.h:436</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a6a2a06208b4d64a5a8ef75a4bd3e34bd"><div class="ttname"><a href="structu_s_1_1_node_data.html#a6a2a06208b4d64a5a8ef75a4bd3e34bd">uS::NodeData::tid</a></div><div class="ttdeci">pthread_t tid</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00211">Networking.h:211</a></div></div>
<div class="ttc" id="abuild__log_8txt_html_a1f7865b67397a7a67a9a651ef20a290b"><div class="ttname"><a href="build__log_8txt.html#a1f7865b67397a7a67a9a651ef20a290b">int</a></div><div class="ttdeci">make depuis src Networking depuis src WebSocketProtocol depuis src WebSocket depuis src Group depuis src Group void uS::Poll int</div><div class="ttdef"><b>Definition:</b> <a href="build__log_8txt_source.html#l00011">build_log.txt:11</a></div></div>
<div class="ttc" id="astructu_s_1_1_poll_html_abe257e4e4a428a8a1ef1b4d3ed564a0d"><div class="ttname"><a href="structu_s_1_1_poll.html#abe257e4e4a428a8a1ef1b4d3ed564a0d">uS::Poll::change</a></div><div class="ttdeci">void change(Loop *, Poll *self, int events)</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00155">Asio.h:155</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_ab5f00a4ff96f2449fdb95cd2119d12e1"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#ab5f00a4ff96f2449fdb95cd2119d12e1">uS::TransferData::ssl</a></div><div class="ttdeci">SSL * ssl</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00011">Socket.h:11</a></div></div>
<div class="ttc" id="astructu_s_1_1_poll_html_ab2dcc90867bd8d857be1865dda0e9e10"><div class="ttname"><a href="structu_s_1_1_poll.html#ab2dcc90867bd8d857be1865dda0e9e10">uS::Poll::getFd</a></div><div class="ttdeci">boost::asio::ip::tcp::socket::native_type getFd()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00117">Asio.h:117</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a0a6a0e4adbbd115c8e88a1a00be198e3"><div class="ttname"><a href="structu_s_1_1_socket.html#a0a6a0e4adbbd115c8e88a1a00be198e3">uS::Socket::changePoll</a></div><div class="ttdeci">void changePoll(Socket *socket)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00108">Socket.h:108</a></div></div>
<div class="ttc" id="anamespaceu_s_html"><div class="ttname"><a href="namespaceu_s.html">uS</a></div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00010">Asio.h:10</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_a0588478aa3eb1f5f507df549baf9424d"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a0588478aa3eb1f5f507df549baf9424d">uS::Socket::Queue::Message::reserved</a></div><div class="ttdeci">void * reserved</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00044">Socket.h:44</a></div></div>
<div class="ttc" id="a_networking_8h_html_a9f55d0e90dc8cc6b2287312435cdde48"><div class="ttname"><a href="_networking_8h.html#a9f55d0e90dc8cc6b2287312435cdde48">MSG_NOSIGNAL</a></div><div class="ttdeci">#define MSG_NOSIGNAL</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00014">Networking.h:14</a></div></div>
<div class="ttc" id="astructu_s_1_1_timer_html_a350d0ced8990746bcf176dbb92b59bbe"><div class="ttname"><a href="structu_s_1_1_timer.html#a350d0ced8990746bcf176dbb92b59bbe">uS::Timer::setData</a></div><div class="ttdeci">void setData(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00047">Asio.h:47</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_a5c5d304c57a4e76bd905b5c784472ec6"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#a5c5d304c57a4e76bd905b5c784472ec6">uS::TransferData::transferCb</a></div><div class="ttdeci">void(* transferCb)(Poll *)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00022">Socket.h:22</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a4d1bf51315b6dd297047b29a5a8db8fe"><div class="ttname"><a href="structu_s_1_1_socket.html#a4d1bf51315b6dd297047b29a5a8db8fe">uS::Socket::enqueue</a></div><div class="ttdeci">void enqueue(Queue::Message *message)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00283">Socket.h:283</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_adabb8bd785037a59a91f78b0ad387273"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#adabb8bd785037a59a91f78b0ad387273">uS::Socket::Queue::Message::nextMessage</a></div><div class="ttdeci">Message * nextMessage</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00042">Socket.h:42</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a9cbd30c06deb03c91fdbbe434d761875"><div class="ttname"><a href="structu_s_1_1_socket.html#a9cbd30c06deb03c91fdbbe434d761875">uS::Socket::isShuttingDown</a></div><div class="ttdeci">bool isShuttingDown()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00487">Socket.h:487</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a8a172747528e58a85c682abf483ed59a"><div class="ttname"><a href="structu_s_1_1_socket.html#a8a172747528e58a85c682abf483ed59a">uS::Socket::setState</a></div><div class="ttdeci">void setState()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00271">Socket.h:271</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a81edd7ed05f455899a09711e37fb2f42"><div class="ttname"><a href="structu_s_1_1_socket.html#a81edd7ed05f455899a09711e37fb2f42">uS::Socket::setUserData</a></div><div class="ttdeci">void setUserData(void *user)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00432">Socket.h:432</a></div></div>
<div class="ttc" id="astructu_s_1_1_poll_html_a40ff55c845855ab9a387c5d2e7c09a45"><div class="ttname"><a href="structu_s_1_1_poll.html#a40ff55c845855ab9a387c5d2e7c09a45">uS::Poll::close</a></div><div class="ttdeci">void close(Loop *loop, void(*cb)(Poll *))</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00176">Asio.h:176</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a4392ca8c27b8f58e86721377da1dec49"><div class="ttname"><a href="structu_s_1_1_node_data.html#a4392ca8c27b8f58e86721377da1dec49">uS::NodeData::getSmallMemoryBlock</a></div><div class="ttdeci">char * getSmallMemoryBlock(int index)</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00222">Networking.h:222</a></div></div>
<div class="ttc" id="aclassu_s_1_1_node_html"><div class="ttname"><a href="classu_s_1_1_node.html">uS::Node</a></div><div class="ttdef"><b>Definition:</b> <a href="_node_8h_source.html#l00015">Node.h:15</a></div></div>
<div class="ttc" id="astructu_s_1_1_timer_html_acd53235761732656abe2f49495b27315"><div class="ttname"><a href="structu_s_1_1_timer.html#acd53235761732656abe2f49495b27315">uS::Timer::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00062">Asio.h:62</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a5e3d88792f59e861f61081eced2a77d3"><div class="ttname"><a href="structu_s_1_1_socket.html#a5e3d88792f59e861f61081eced2a77d3">uS::Socket::freeMessage</a></div><div class="ttdeci">void freeMessage(Queue::Message *message)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00300">Socket.h:300</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a6e9f900bf9309cf3e77d12bbdf6ad09c"><div class="ttname"><a href="structu_s_1_1_node_data.html#a6e9f900bf9309cf3e77d12bbdf6ad09c">uS::NodeData::asyncMutex</a></div><div class="ttdeci">std::recursive_mutex * asyncMutex</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00213">Networking.h:213</a></div></div>
<div class="ttc" id="astructu_s_1_1_timer_html_afd1860bec06e19ed4d51c7768c3696ae"><div class="ttname"><a href="structu_s_1_1_timer.html#afd1860bec06e19ed4d51c7768c3696ae">uS::Timer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00058">Asio.h:58</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_html"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue.html">uS::Socket::Queue</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00038">Socket.h:38</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_html_a928b04554103229ea672d9f3f8020747"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue.html#a928b04554103229ea672d9f3f8020747">uS::Socket::Queue::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00060">Socket.h:60</a></div></div>
<div class="ttc" id="aaddon_8h_html_a2340275cf8382df4b7c494c1a78f5ccb"><div class="ttname"><a href="addon_8h.html#a2340275cf8382df4b7c494c1a78f5ccb">setUserData</a></div><div class="ttdeci">void setUserData(const FunctionCallbackInfo&lt; Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="addon_8h_source.html#l00123">addon.h:123</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a6864c35ea98b57a30ab3918c532e2c79"><div class="ttname"><a href="structu_s_1_1_socket.html#a6864c35ea98b57a30ab3918c532e2c79">uS::Socket::state</a></div><div class="ttdeci">struct uS::Socket::@1 state</div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html"><div class="ttname"><a href="structu_s_1_1_transfer_data.html">uS::TransferData</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00008">Socket.h:8</a></div></div>
<div class="ttc" id="astructu_s_1_1_async_html_a8b221115835940dc62d0df8f6c54b86d"><div class="ttname"><a href="structu_s_1_1_async.html#a8b221115835940dc62d0df8f6c54b86d">uS::Async::send</a></div><div class="ttdeci">void send()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00083">Asio.h:83</a></div></div>
<div class="ttc" id="astructu_s_1_1_context_html"><div class="ttname"><a href="structu_s_1_1_context.html">uS::Context</a></div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00082">Networking.h:82</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ab11380927901b057825537ab0f153d20"><div class="ttname"><a href="structu_s_1_1_socket.html#ab11380927901b057825537ab0f153d20">uS::Socket::setPoll</a></div><div class="ttdeci">int setPoll(int poll)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00080">Socket.h:80</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_address_html_af67cd32ef387050c9efb9bbc52874fd2"><div class="ttname"><a href="structu_s_1_1_socket_1_1_address.html#af67cd32ef387050c9efb9bbc52874fd2">uS::Socket::Address::port</a></div><div class="ttdeci">unsigned int port</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00437">Socket.h:437</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_a44abbb390c330c28d9d9978c4a1d3738"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#a44abbb390c330c28d9d9978c4a1d3738">uS::TransferData::fd</a></div><div class="ttdeci">uv_os_sock_t fd</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00010">Socket.h:10</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ab86ba43740c50f1a969917ee1105e55f"><div class="ttname"><a href="structu_s_1_1_socket.html#ab86ba43740c50f1a969917ee1105e55f">uS::Socket::getUserData</a></div><div class="ttdeci">void * getUserData()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00428">Socket.h:428</a></div></div>
<div class="ttc" id="a_networking_8h_html"><div class="ttname"><a href="_networking_8h.html">Networking.h</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a241d2ac2268d3a9fa3084cca32d218de"><div class="ttname"><a href="structu_s_1_1_socket.html#a241d2ac2268d3a9fa3084cca32d218de">uS::Socket::closeSocket</a></div><div class="ttdeci">void closeSocket()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00472">Socket.h:472</a></div></div>
<div class="ttc" id="astructu_s_1_1_poll_html"><div class="ttname"><a href="structu_s_1_1_poll.html">uS::Poll</a></div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00104">Asio.h:104</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_ae81d8fbd6fd7f87ff601006d30e977ef"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ae81d8fbd6fd7f87ff601006d30e977ef">uS::Socket::Queue::Message::callback</a></div><div class="ttdeci">void(* callback)(void *socket, void *data, bool cancelled, void *reserved)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00043">Socket.h:43</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a4906052563459d6978e12b796574e25c"><div class="ttname"><a href="structu_s_1_1_socket.html#a4906052563459d6978e12b796574e25c">uS::Socket::poll</a></div><div class="ttdeci">int poll</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00029">Socket.h:29</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_html_a09eda935ea88dcacd615dce16e686c71"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue.html#a09eda935ea88dcacd615dce16e686c71">uS::Socket::Queue::pop</a></div><div class="ttdeci">void pop()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00048">Socket.h:48</a></div></div>
<div class="ttc" id="aaddon_8h_html_ad4f09777cea808648dcd309b06af2911"><div class="ttname"><a href="addon_8h.html#ad4f09777cea808648dcd309b06af2911">send</a></div><div class="ttdeci">void send(const FunctionCallbackInfo&lt; Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="addon_8h_source.html#l00170">addon.h:170</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ad5ef4e37198b1356fe1ad5deb5d66f1f"><div class="ttname"><a href="structu_s_1_1_socket.html#ad5ef4e37198b1356fe1ad5deb5d66f1f">uS::Socket::write</a></div><div class="ttdeci">bool write(Queue::Message *message, bool &amp;wasTransferred)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00304">Socket.h:304</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_ad727b0db74cd9a912f3931d147837801"><div class="ttname"><a href="structu_s_1_1_node_data.html#ad727b0db74cd9a912f3931d147837801">uS::NodeData::changePollQueue</a></div><div class="ttdeci">std::vector&lt; Poll * &gt; changePollQueue</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00215">Networking.h:215</a></div></div>
<div class="ttc" id="astructu_s_1_1_listen_socket_html"><div class="ttname"><a href="structu_s_1_1_listen_socket.html">uS::ListenSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00495">Socket.h:495</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html"><div class="ttname"><a href="structu_s_1_1_node_data.html">uS::NodeData</a></div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00199">Networking.h:199</a></div></div>
<div class="ttc" id="astructu_s_1_1_timer_html"><div class="ttname"><a href="structu_s_1_1_timer.html">uS::Timer</a></div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00027">Asio.h:27</a></div></div>
<div class="ttc" id="aclassu_s_1_1_t_l_s_1_1_context_html"><div class="ttname"><a href="classu_s_1_1_t_l_s_1_1_context.html">uS::TLS::Context</a></div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00159">Networking.h:159</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_acd05df2e4a97e47934a356213aefb792"><div class="ttname"><a href="structu_s_1_1_socket.html#acd05df2e4a97e47934a356213aefb792">uS::Socket::setShuttingDown</a></div><div class="ttdeci">void setShuttingDown(bool shuttingDown)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00085">Socket.h:85</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a4a6647b9d962984c23ecf89a3d5b6efd"><div class="ttname"><a href="structu_s_1_1_socket.html#a4a6647b9d962984c23ecf89a3d5b6efd">uS::Socket::hasEmptyQueue</a></div><div class="ttdeci">bool hasEmptyQueue()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00279">Socket.h:279</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a8c5219c155234ca3ec7635a5d34bb10d"><div class="ttname"><a href="structu_s_1_1_node_data.html#a8c5219c155234ca3ec7635a5d34bb10d">uS::NodeData::recvBuffer</a></div><div class="ttdeci">char * recvBuffer</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00201">Networking.h:201</a></div></div>
<div class="ttc" id="abuild__log_8txt_html_a644a8e656cf4d496cc7d47a0154d6f4b"><div class="ttname"><a href="build__log_8txt.html#a644a8e656cf4d496cc7d47a0154d6f4b">cb</a></div><div class="ttdeci">make depuis src Networking depuis src WebSocketProtocol depuis src WebSocket depuis src Group depuis src Group void uS::Poll int [-Wcast-function-type] this cb</div><div class="ttdef"><b>Definition:</b> <a href="build__log_8txt_source.html#l00012">build_log.txt:12</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_afb2a25a016e2d6f726fc9e97f87d4af4"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#afb2a25a016e2d6f726fc9e97f87d4af4">uS::TransferData::pollCb</a></div><div class="ttdeci">void(* pollCb)(Poll *, int, int)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00014">Socket.h:14</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a97f8c1006871b3b39d66d85c7effa4d5"><div class="ttname"><a href="structu_s_1_1_socket.html#a97f8c1006871b3b39d66d85c7effa4d5">uS::Socket::startTimeout</a></div><div class="ttdeci">void startTimeout(int timeoutMs=15000)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00123">Socket.h:123</a></div></div>
<div class="ttc" id="aaddon_8h_html_a062f2d1c51ffd0684aa332705d928c40"><div class="ttname"><a href="addon_8h.html#a062f2d1c51ffd0684aa332705d928c40">getAddress</a></div><div class="ttdeci">void getAddress(const FunctionCallbackInfo&lt; Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="addon_8h_source.html#l00133">addon.h:133</a></div></div>
<div class="ttc" id="astructu_s_1_1_timer_html_af90fc27ca995cacbfe4343dce88929aa"><div class="ttname"><a href="structu_s_1_1_timer.html#af90fc27ca995cacbfe4343dce88929aa">uS::Timer::start</a></div><div class="ttdeci">void start(void(*cb)(Timer *), int first, int repeat)</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00035">Asio.h:35</a></div></div>
<div class="ttc" id="anamespace_bwaaah_1_1menu_html_a402b86d2fbd91b28adec0e86677d1239"><div class="ttname"><a href="namespace_bwaaah_1_1menu.html#a402b86d2fbd91b28adec0e86677d1239">Bwaaah.menu.state</a></div><div class="ttdeci">state</div><div class="ttdef"><b>Definition:</b> <a href="menu_8py_source.html#l00061">menu.py:61</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_af1a37184845a5848af5a1281b93f02ad"><div class="ttname"><a href="structu_s_1_1_node_data.html#af1a37184845a5848af5a1281b93f02ad">uS::NodeData::recvLength</a></div><div class="ttdeci">int recvLength</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00202">Networking.h:202</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ab000a9d579baac719182074100133c21"><div class="ttname"><a href="structu_s_1_1_socket.html#ab000a9d579baac719182074100133c21">uS::Socket::sendTransformed</a></div><div class="ttdeci">void sendTransformed(const char *message, size_t length, void(*callback)(void *socket, void *data, bool cancelled, void *reserved), void *callbackData, D transformData)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00353">Socket.h:353</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_a45854495707f03110dc310f6f125f0ea"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a45854495707f03110dc310f6f125f0ea">uS::Socket::Queue::Message::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00041">Socket.h:41</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a7c87c8a0af2f52e3efd6b4cbca88bf61"><div class="ttname"><a href="structu_s_1_1_socket.html#a7c87c8a0af2f52e3efd6b4cbca88bf61">uS::Socket::transfer</a></div><div class="ttdeci">void transfer(NodeData *nodeData, void(*cb)(Poll *))</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00089">Socket.h:89</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_address_html_a949c31d62265b47d35f3f3351fee9f27"><div class="ttname"><a href="structu_s_1_1_socket_1_1_address.html#a949c31d62265b47d35f3f3351fee9f27">uS::Socket::Address::address</a></div><div class="ttdeci">const char * address</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00438">Socket.h:438</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ab23d8de6bd87bdba787c2663390f1602"><div class="ttname"><a href="structu_s_1_1_socket.html#ab23d8de6bd87bdba787c2663390f1602">uS::Socket::cork</a></div><div class="ttdeci">void cork(int enable)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00448">Socket.h:448</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a7314b340328f78687bb3c5d86c500d95"><div class="ttname"><a href="structu_s_1_1_node_data.html#a7314b340328f78687bb3c5d86c500d95">uS::NodeData::freeSmallMemoryBlock</a></div><div class="ttdeci">void freeSmallMemoryBlock(char *memory, int index)</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00232">Networking.h:232</a></div></div>
<div class="ttc" id="astructu_s_1_1_listen_socket_html_a32a3130d9f30f4071eb7d61a6bfa6708"><div class="ttname"><a href="structu_s_1_1_listen_socket.html#a32a3130d9f30f4071eb7d61a6bfa6708">uS::ListenSocket::sslContext</a></div><div class="ttdeci">uS::TLS::Context sslContext</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00502">Socket.h:502</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_html_aa0930c1a958c4b2e1d2aeb6b43b60021"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue.html#aa0930c1a958c4b2e1d2aeb6b43b60021">uS::Socket::Queue::push</a></div><div class="ttdeci">void push(Message *message)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00063">Socket.h:63</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_address_html_a9f8156ea3d8703c87f19881db575fd14"><div class="ttname"><a href="structu_s_1_1_socket_1_1_address.html#a9f8156ea3d8703c87f19881db575fd14">uS::Socket::Address::family</a></div><div class="ttdeci">const char * family</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00439">Socket.h:439</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a555982b4927aa4fe93e34dc8708445ef"><div class="ttname"><a href="structu_s_1_1_socket.html#a555982b4927aa4fe93e34dc8708445ef">uS::Socket::getPoll</a></div><div class="ttdeci">int getPoll()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00076">Socket.h:76</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_ab8dc3d46b7c06a9635073a49c33c73b6"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#ab8dc3d46b7c06a9635073a49c33c73b6">uS::Socket::Queue::Message::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00040">Socket.h:40</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_af0382e650ead4694c8114c4b0b56743b"><div class="ttname"><a href="structu_s_1_1_socket.html#af0382e650ead4694c8114c4b0b56743b">uS::Socket::Socket</a></div><div class="ttdeci">Socket(NodeData *nodeData, Loop *loop, uv_os_sock_t fd, SSL *ssl)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00414">Socket.h:414</a></div></div>
<div class="ttc" id="astructu_s_1_1_listen_socket_html_afd8674fc7736330b555c67084bd0f6c5"><div class="ttname"><a href="structu_s_1_1_listen_socket.html#afd8674fc7736330b555c67084bd0f6c5">uS::ListenSocket::ListenSocket</a></div><div class="ttdeci">ListenSocket(NodeData *nodeData, Loop *loop, uv_os_sock_t fd, SSL *ssl)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00497">Socket.h:497</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a445a0a4183a8a06dd302bc9d8c5582f4"><div class="ttname"><a href="structu_s_1_1_node_data.html#a445a0a4183a8a06dd302bc9d8c5582f4">uS::NodeData::getMemoryBlockIndex</a></div><div class="ttdeci">static int getMemoryBlockIndex(size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00218">Networking.h:218</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a2f4fc81e5838284b4bf8b36eeff2b501"><div class="ttname"><a href="structu_s_1_1_socket.html#a2f4fc81e5838284b4bf8b36eeff2b501">uS::Socket::nodeData</a></div><div class="ttdeci">NodeData * nodeData</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00035">Socket.h:35</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a0d1b35a546a5afe214adf71a74b6abbf"><div class="ttname"><a href="structu_s_1_1_socket.html#a0d1b35a546a5afe214adf71a74b6abbf">uS::Socket::setNoDelay</a></div><div class="ttdeci">void setNoDelay(int enable)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00444">Socket.h:444</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a4ce1bf5d0098ad1346a99bd71530b7de"><div class="ttname"><a href="structu_s_1_1_socket.html#a4ce1bf5d0098ad1346a99bd71530b7de">uS::Socket::cancelTimeout</a></div><div class="ttdeci">void cancelTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00135">Socket.h:135</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a2f943ac89c8d7578845de330781b72b4"><div class="ttname"><a href="structu_s_1_1_socket.html#a2f943ac89c8d7578845de330781b72b4">uS::Socket::shuttingDown</a></div><div class="ttdeci">int shuttingDown</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00030">Socket.h:30</a></div></div>
<div class="ttc" id="aaddon_8h_html_a2cf633790443e79db7bd9714b955c0e0"><div class="ttname"><a href="addon_8h.html#a2cf633790443e79db7bd9714b955c0e0">getUserData</a></div><div class="ttdeci">void getUserData(const FunctionCallbackInfo&lt; Value &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="addon_8h_source.html#l00111">addon.h:111</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_ae41d00dd8888a37bf235d6e4c4dd3bef"><div class="ttname"><a href="structu_s_1_1_socket.html#ae41d00dd8888a37bf235d6e4c4dd3bef">uS::Socket::getNodeData</a></div><div class="ttdeci">NodeData * getNodeData()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00422">Socket.h:422</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_a6dacc0980483bb29a9c1f99380222978"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#a6dacc0980483bb29a9c1f99380222978">uS::TransferData::destination</a></div><div class="ttdeci">NodeData * destination</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00021">Socket.h:21</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_af3ac1b3143ed2f76b76e4bc4c923817f"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#af3ac1b3143ed2f76b76e4bc4c923817f">uS::TransferData::userData</a></div><div class="ttdeci">void * userData</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00018">Socket.h:18</a></div></div>
<div class="ttc" id="astructu_s_1_1_context_html_acba8f4f3c02db7a42864b9084c7186fa"><div class="ttname"><a href="structu_s_1_1_context.html#acba8f4f3c02db7a42864b9084c7186fa">uS::Context::closeSocket</a></div><div class="ttdeci">void closeSocket(uv_os_sock_t fd)</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00140">Networking.h:140</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_af3cccd4b155509ecbfdb6ebd5ad67f55"><div class="ttname"><a href="structu_s_1_1_socket.html#af3cccd4b155509ecbfdb6ebd5ad67f55">uS::Socket::allocMessage</a></div><div class="ttdeci">Queue::Message * allocMessage(size_t length, const char *data=0)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00287">Socket.h:287</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_aa377349b17a65d9968f20b076db65858"><div class="ttname"><a href="structu_s_1_1_socket.html#aa377349b17a65d9968f20b076db65858">uS::Socket::shutdown</a></div><div class="ttdeci">void shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00462">Socket.h:462</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a023bddf948a9016e8d84190fe55ecb69"><div class="ttname"><a href="structu_s_1_1_node_data.html#a023bddf948a9016e8d84190fe55ecb69">uS::NodeData::loop</a></div><div class="ttdeci">Loop * loop</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00203">Networking.h:203</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a568f99f3e39c8e5e8ecc62d50ea78474"><div class="ttname"><a href="structu_s_1_1_socket.html#a568f99f3e39c8e5e8ecc62d50ea78474">uS::Socket::messageQueue</a></div><div class="ttdeci">struct uS::Socket::Queue messageQueue</div></div>
<div class="ttc" id="astructu_s_1_1_timer_html_acebdbb39da268b16462017e4f323ec53"><div class="ttname"><a href="structu_s_1_1_timer.html#acebdbb39da268b16462017e4f323ec53">uS::Timer::getData</a></div><div class="ttdeci">void * getData()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00051">Asio.h:51</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_aef1048dff6be13161695c1752e7a04b6"><div class="ttname"><a href="structu_s_1_1_socket.html#aef1048dff6be13161695c1752e7a04b6">uS::Socket::sslIoHandler</a></div><div class="ttdeci">static void sslIoHandler(Poll *p, int status, int events)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00145">Socket.h:145</a></div></div>
<div class="ttc" id="astructu_s_1_1_poll_html_af8085e20853c641510aeb5040c0d186f"><div class="ttname"><a href="structu_s_1_1_poll.html#af8085e20853c641510aeb5040c0d186f">uS::Poll::isClosed</a></div><div class="ttdeci">bool isClosed()</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00113">Asio.h:113</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_a85e8e0e12215ee250a8f230c2ee383e8"><div class="ttname"><a href="structu_s_1_1_node_data.html#a85e8e0e12215ee250a8f230c2ee383e8">uS::NodeData::async</a></div><div class="ttdeci">Async * async</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00210">Networking.h:210</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html_a537dbb8c4724309e1d8917286aa983d1"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html#a537dbb8c4724309e1d8917286aa983d1">uS::Socket::Queue::Message::callbackData</a></div><div class="ttdeci">void * callbackData</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00044">Socket.h:44</a></div></div>
<div class="ttc" id="a_asio_8h_html_a083ed755f6023cb932aac26720c654d0"><div class="ttname"><a href="_asio_8h.html#a083ed755f6023cb932aac26720c654d0">uv_os_sock_t</a></div><div class="ttdeci">boost::asio::ip::tcp::socket::native_type uv_os_sock_t</div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00006">Asio.h:6</a></div></div>
<div class="ttc" id="a_networking_8h_html_aa9d94c071c7778c2f0cc1fd1a78baca6"><div class="ttname"><a href="_networking_8h.html#aa9d94c071c7778c2f0cc1fd1a78baca6">WIN32_EXPORT</a></div><div class="ttdeci">#define WIN32_EXPORT</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00066">Networking.h:66</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_html_ad770e4a9f5e9d7827bd8beff325fe598"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue.html#ad770e4a9f5e9d7827bd8beff325fe598">uS::Socket::Queue::front</a></div><div class="ttdeci">Message * front()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00061">Socket.h:61</a></div></div>
<div class="ttc" id="astructu_s_1_1_loop_html"><div class="ttname"><a href="structu_s_1_1_loop.html">uS::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="_asio_8h_source.html#l00012">Asio.h:12</a></div></div>
<div class="ttc" id="a_networking_8h_html_a633b0396ff93d336a088412a190a5072"><div class="ttname"><a href="_networking_8h.html#a633b0396ff93d336a088412a190a5072">SOCKET_ERROR</a></div><div class="ttdeci">#define SOCKET_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00064">Networking.h:64</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html"><div class="ttname"><a href="structu_s_1_1_socket.html">uS::Socket</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00026">Socket.h:26</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_1_1_queue_1_1_message_html"><div class="ttname"><a href="structu_s_1_1_socket_1_1_queue_1_1_message.html">uS::Socket::Queue::Message</a></div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00039">Socket.h:39</a></div></div>
<div class="ttc" id="astructu_s_1_1_context_html_ac52be5687ad9dcd4388d7225003dabf6"><div class="ttname"><a href="structu_s_1_1_context.html#ac52be5687ad9dcd4388d7225003dabf6">uS::Context::wouldBlock</a></div><div class="ttdeci">bool wouldBlock()</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00148">Networking.h:148</a></div></div>
<div class="ttc" id="astructu_s_1_1_socket_html_a72efcc8bb407e6f313b6a14e7beaee62"><div class="ttname"><a href="structu_s_1_1_socket.html#a72efcc8bb407e6f313b6a14e7beaee62">uS::Socket::ioHandler</a></div><div class="ttdeci">static void ioHandler(Poll *p, int status, int events)</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00217">Socket.h:217</a></div></div>
<div class="ttc" id="astructu_s_1_1_node_data_html_aa817a2ac768f5dacc48d013e77eb3b65"><div class="ttname"><a href="structu_s_1_1_node_data.html#aa817a2ac768f5dacc48d013e77eb3b65">uS::NodeData::netContext</a></div><div class="ttdeci">uS::Context * netContext</div><div class="ttdef"><b>Definition:</b> <a href="_networking_8h_source.html#l00204">Networking.h:204</a></div></div>
<div class="ttc" id="astructu_s_1_1_transfer_data_html_a267e4730c68d4f74ce21d31918e610d9"><div class="ttname"><a href="structu_s_1_1_transfer_data.html#a267e4730c68d4f74ce21d31918e610d9">uS::TransferData::pollEvents</a></div><div class="ttdeci">int pollEvents</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00015">Socket.h:15</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1d3170fa519a5c43106e74523a0e4bd4.html">Battlegroud-BR-master</a></li><li class="navelem"><a class="el" href="dir_ff1fb5f2054ce35ffd7863f77f36eb16.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_2da33531b6b914b3b56d0b23306a507d.html">uws</a></li><li class="navelem"><a class="el" href="dir_a031ace3b4f32fd6f9fab419918789f0.html">src</a></li><li class="navelem"><a class="el" href="_socket_8h.html">Socket.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
